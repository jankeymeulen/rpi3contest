<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script type="text/javascript">
	google.charts.load('current', {packages: ['corechart', 'line']});
	google.charts.setOnLoadCallback(drawChart);


	var items = [];

	$.getJSON( "https://cafefritkotqueue.appspot.com/queue", function( data ) {
//	$.getJSON( "/dummy", function( data ) {
 		 $.each( data, function( key, val ) {
    		items.push( [new Date(val.Timestamp),val.Length] );
  		});
	});

	function drawChart() {
      		var data = new google.visualization.DataTable();
      		data.addColumn('datetime', 'X');
      		data.addColumn('number', 'Queue Length');
      		data.addRows(items);

      var options = {
        hAxis: {
          title: 'Time'
        },
        vAxis: {
          title: 'Queue Length'
        },
	legend: {
	  position: 'None'
	}
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px"></div>
    <div id="test_div"></div>
  </body>
</html>
